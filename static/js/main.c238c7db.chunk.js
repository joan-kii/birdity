(this.webpackJsonpbirdity=this.webpackJsonpbirdity||[]).push([[0],{154:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(14),i=n.n(r),s=n(224),o=n(119),l=n(223),u=n(195),d=n(8),p=n.n(d),j=n(12),b=n(9),h=n(49),m=(n(140),n(142),n(155),h.a.initializeApp({apiKey:"AIzaSyANZnwa53LqLikL11_CEuMifbH2t3VzWX8",authDomain:"birdity-624f7.firebaseapp.com",projectId:"birdity-624f7",storageBucket:"birdity-624f7.appspot.com",messagingSenderId:"326077315401",appId:"1:326077315401:web:3b889363389dfa89804298"})),f=m.auth(),x=m.firestore(),g=m.storage(),O=h.a.firestore,v=O.FieldValue.serverTimestamp,y=n(2),w=function(){return Object(a.useContext)(S)},S=Object(a.createContext)(),N=function(e){var t=Object(a.useState)(!1),n=Object(b.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(!1),s=Object(b.a)(i,2),o=s[0],l=s[1],u=Object(a.useState)(null),d=Object(b.a)(u,2),m=d[0],g=d[1],O=Object(a.useState)(!1),v=Object(b.a)(O,2),w=v[0],N=v[1],k=Object(a.useState)(!0),C=Object(b.a)(k,2),B=C[0],R=C[1],I=Object(a.useState)(!1),U=Object(b.a)(I,2),L=U[0],F=U[1],P=Object(a.useState)(!1),T=Object(b.a)(P,2),D=T[0],E=T[1],z=function(){var e=Object(j.a)(p.a.mark((function e(t,n,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.createUserWithEmailAndPassword(t,n).then((function(e){e.user.updateProfile({displayName:a}).then((function(){return N(!1),x.collection("users").doc(e.user.uid).set({name:e.user.displayName,posts:[]})}))})).catch((function(){N(!0)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new h.a.auth.GoogleAuthProvider,e.abrupt("return",f.signInWithPopup(t).then((function(e){return N(!1),x.collection("users").doc(e.user.uid).set({name:e.user.displayName,posts:[]})})).catch((function(){N(!0)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new h.a.auth.FacebookAuthProvider).addScope("user_birthday"),e.abrupt("return",f.signInWithPopup(t).then((function(e){return N(!1),x.collection("users").doc(e.user.uid).set({name:e.user.displayName,posts:[]})})).catch((function(){N(!0)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new h.a.auth.TwitterAuthProvider,e.abrupt("return",f.signInWithPopup(t).then((function(e){return N(!1),x.collection("users").doc(e.user.uid).set({name:e.user.displayName,posts:[]})})).catch((function(){N(!0)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(j.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.signInWithEmailAndPassword(t,n).then((function(){N(!1)})).catch((function(){N(!0)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){return f.onAuthStateChanged((function(e){g(e),R(!1)}))}),[]);var G={openSignUpForm:c,setOpenSignUpForm:r,openLogInForm:o,setOpenLogInForm:l,currentUser:m,signUp:z,signInError:w,setSignInError:N,googleSignUp:A,facebookSignUp:W,twitterSignUp:M,logout:function(){return f.signOut()},login:H,reRenderPosts:L,setReRenderPosts:F,openChat:D,setOpenChat:E};return Object(y.jsx)(S.Provider,{value:G,children:!B&&e.children})},k=n(61),C=n(33),B=n(206),R=n(207),I=n(44),U=n(156),L=n(103),F=n.n(L),P=n(105),T=n.n(P),D=n(104),E=n.n(D),z=n(227),A=n(229),W=n(226),M=n(198),H=n(122),G=n(231),q=n(76),V=n.n(q),_=n(201),Y=n(225),J=n(202),Z=n(205),K=n(77),X=n.n(K),Q=n(78),$=n.n(Q),ee=n(123),te=Object(u.a)((function(e){return{paper:{display:"flex",position:"absolute",flexDirection:"column",justifyContent:"center",width:"40%",top:"10%",left:"30%",alignItems:"center",padding:e.spacing(2,4,3)},title:{fontSize:24,marginTop:e.spacing(2),marginBottom:e.spacing(1),cursor:"default"},form:{width:"100%",marginTop:e.spacing(3)},text:{fontSize:18,cursor:"pointer"},googleButton:{marginTop:e.spacing(1),marginBottom:e.spacing(2)},button:{marginTop:e.spacing(2)}}})),ne=function(){var e=te(),t=Object(a.useState)(""),n=Object(b.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(!1),s=Object(b.a)(i,2),o=s[0],l=s[1],u=Object(a.useContext)(S),d=u.setOpenLogInForm,h=u.setOpenSignUpForm,m=u.googleSignUp,f=u.facebookSignUp,x=u.twitterSignUp,g=u.signUp,O=Object(a.useRef)(),v=Object(a.useRef)(),w=Object(a.useRef)(),N=Object(a.useRef)();function k(){return(k=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),v.current.value===w.current.value){e.next=3;break}return e.abrupt("return",r("Passwords do not match!"));case 3:return e.prev=3,r(""),l(!0),e.next=8,g(O.current.value,v.current.value,N.current.value);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),r("Failed to create an account");case 13:h(!1),l(!1);case 15:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function C(){return(C=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(""),l(!0),e.next=5,m();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(c),r("Unable to Sign Up with Google");case 11:h(!1),l(!1);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function B(){return(B=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(""),l(!0),e.next=5,f();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(c),r("Unable to Sign Up with Facebook");case 11:h(!1),l(!1);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function R(){return(R=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(""),l(!0),e.next=5,x();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(c),r("Unable to Sign Up with Twitter");case 11:h(!1),l(!1);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(y.jsx)(M.a,{children:Object(y.jsxs)(H.a,{className:e.paper,children:[Object(y.jsx)(G.a,{children:Object(y.jsx)(V.a,{})}),Object(y.jsx)(I.a,{variant:"h2",component:"h4",className:e.title,color:"primary",children:"Sign Up"}),c&&Object(y.jsx)(W.a,{severity:"error",children:c}),Object(y.jsxs)("form",{className:e.form,onSubmit:function(e){return k.apply(this,arguments)},children:[Object(y.jsxs)(_.a,{container:!0,spacing:4,children:[Object(y.jsxs)(_.a,{container:!0,justify:"center",children:[Object(y.jsxs)(J.a,{variant:"contained",size:"large","aria-label":"contained button group",children:[Object(y.jsx)(U.a,{"data-testid":"facebookSignUpButton",onClick:function(){return B.apply(this,arguments)},endIcon:Object(y.jsx)(X.a,{}),children:"Sign Up with Facebook"}),Object(y.jsx)(U.a,{"data-testid":"twitterSignUpButton",onClick:function(){return R.apply(this,arguments)},startIcon:Object(y.jsx)($.a,{}),children:"Sign Up with Twitter"})]}),Object(y.jsx)(U.a,{"data-testid":"googleSignUpButton",variant:"contained",className:e.googleButton,onClick:function(){return C.apply(this,arguments)},size:"large",startIcon:Object(y.jsx)(ee.a,{htmlColor:"inherit",children:Object(y.jsxs)("svg",{role:"img",viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg",children:[Object(y.jsx)("title",{children:"Google icon"}),Object(y.jsx)("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})]})}),children:"Sign Up with Google"})]}),Object(y.jsx)(_.a,{item:!0,xs:12,children:Object(y.jsx)(Y.a,{required:!0,id:"userName","data-testid":"userName",type:"text",inputRef:N,fullWidth:!0,label:"Name",placeholder:"At least 3 characters",variant:"outlined"})}),Object(y.jsx)(_.a,{item:!0,xs:12,children:Object(y.jsx)(Y.a,{required:!0,id:"email","data-testid":"email",type:"email",inputRef:O,fullWidth:!0,label:"Email",variant:"outlined"})}),Object(y.jsx)(_.a,{item:!0,xs:12,children:Object(y.jsx)(Y.a,{required:!0,id:"password","data-testid":"password",type:"password",inputRef:v,fullWidth:!0,label:"Password",variant:"outlined"})}),Object(y.jsx)(_.a,{item:!0,xs:12,children:Object(y.jsx)(Y.a,{required:!0,id:"confirmPassword","data-testid":"confirmPassword",type:"password",inputRef:w,fullWidth:!0,label:"Confirm Password",variant:"outlined"})})]}),Object(y.jsx)(U.a,{"data-testid":"emailSignUpButton",type:"submit",className:e.button,variant:"contained",size:"large",fullWidth:!0,disabled:o,children:"Sign Up"}),Object(y.jsx)(_.a,{container:!0,justify:"flex-end",children:Object(y.jsx)(_.a,{item:!0,children:Object(y.jsx)(Z.a,{variant:"subtitle1",className:e.text,onClick:function(){d(!0),h(!1)},children:"Already have an account? Log in."})})})]})]})})},ae=Object(u.a)((function(e){return{paper:{display:"flex",position:"absolute",flexDirection:"column",justifyContent:"center",width:"40%",top:"15%",left:"30%",alignItems:"center",padding:e.spacing(2,4,3)},title:{fontSize:24,marginTop:e.spacing(2),cursor:"default"},form:{width:"100%",marginTop:e.spacing(3)},text:{fontSize:18,cursor:"pointer"},googleButton:{marginTop:e.spacing(1)},button:{marginTop:e.spacing(4),marginBottom:e.spacing(2)}}})),ce=function(){var e=ae(),t=Object(a.useContext)(S),n=t.setOpenLogInForm,c=t.setOpenSignUpForm,r=t.login,i=t.googleSignUp,s=t.facebookSignUp,o=t.twitterSignUp,l=Object(a.useRef)(),u=Object(a.useRef)(),d=Object(a.useState)(""),h=Object(b.a)(d,2),m=h[0],f=h[1];function x(){return(x=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,f(""),e.next=5,r(l.current.value,u.current.value);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),f("Failed to Log In");case 10:n(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function g(){return(g=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(""),e.next=4,i();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(m),f("Unable to Login with Google");case 10:n(!1);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function O(){return(O=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(""),e.next=4,s();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(m),f("Unable to Login with Facebook");case 10:n(!1);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function v(){return(v=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(""),e.next=4,o();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(m),f("Unable to Login with Twitter");case 10:n(!1);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(y.jsx)(M.a,{children:Object(y.jsxs)(H.a,{className:e.paper,children:[Object(y.jsx)(G.a,{children:Object(y.jsx)(V.a,{})}),Object(y.jsx)(I.a,{variant:"h2",component:"h4",className:e.title,color:"primary",children:"Log in"}),m&&Object(y.jsx)(W.a,{severity:"error",children:m}),Object(y.jsxs)("form",{className:e.form,onSubmit:function(e){return x.apply(this,arguments)},children:[Object(y.jsxs)(_.a,{container:!0,spacing:4,children:[Object(y.jsxs)(_.a,{container:!0,justify:"center",children:[Object(y.jsxs)(J.a,{variant:"contained",size:"large","aria-label":"contained button group",children:[Object(y.jsx)(U.a,{"data-testid":"facebookLogInButton",onClick:function(){return O.apply(this,arguments)},endIcon:Object(y.jsx)(X.a,{}),children:"Log in with Facebook"}),Object(y.jsx)(U.a,{"data-testid":"twitterLogInButton",onClick:function(){return v.apply(this,arguments)},startIcon:Object(y.jsx)($.a,{}),children:"Log in with Twitter"})]}),Object(y.jsx)(U.a,{"data-testid":"googleLogInButton",onClick:function(){return g.apply(this,arguments)},variant:"contained",className:e.googleButton,size:"large",startIcon:Object(y.jsx)(ee.a,{htmlColor:"inherit",children:Object(y.jsxs)("svg",{role:"img",viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg",children:[Object(y.jsx)("title",{children:"Google icon"}),Object(y.jsx)("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})]})}),children:"Log in with Google"})]}),Object(y.jsx)(_.a,{item:!0,xs:12,children:Object(y.jsx)(Y.a,{required:!0,"data-testid":"email",id:"email",type:"email",inputRef:l,fullWidth:!0,label:"Email",variant:"outlined"})}),Object(y.jsx)(_.a,{item:!0,xs:12,children:Object(y.jsx)(Y.a,{required:!0,"data-testid":"password",id:"password",type:"password",inputRef:u,fullWidth:!0,label:"Password",variant:"outlined"})})]}),Object(y.jsx)(U.a,{"data-testid":"emailLogInButton",type:"submit",className:e.button,variant:"contained",size:"large",fullWidth:!0,children:"Log in"}),Object(y.jsx)(_.a,{container:!0,justify:"flex-end",children:Object(y.jsx)(_.a,{item:!0,children:Object(y.jsx)(Z.a,{variant:"subtitle1",className:e.text,onClick:function(){c(!0),n(!1)},children:"Need an account? Sign up."})})})]})]})})},re=Object(u.a)((function(e){return{grow:{flexGrow:1,display:"flex"},appBar:{position:"fixed",zIndex:e.zIndex.drawer+1,boxShadow:"none",borderBottom:"solid 1px #e0e0e0"},topbar:{justifyContent:"space-between",background:e.palette.common.white},leftSide:{display:"flex"},rightSide:{display:"flex",justifyContent:"space-between"},button:{marginRight:"0.5em"},logo:{fontFamily:"Satisfy",fontSize:40,cursor:"pointer",color:e.palette.primary.dark,textShadow:"5px 5px 10px #999","&:hover":{textDecoration:"none",color:e.palette.primary.light,textShadow:"3px 3px 7px #999"}},slogan:{color:e.palette.primary.light,cursor:"default",marginLeft:"0.6em",marginBottom:"0.7em",alignSelf:"end"}}})),ie=function(e){return Object(y.jsx)(W.a,Object(k.a)({elevation:6,variant:"filled"},e))},se=function(){var e=re(),t=Object(a.useContext)(S),n=t.openSignUpForm,c=t.setOpenSignUpForm,r=t.openLogInForm,i=t.setOpenLogInForm,s=t.signInError,o=t.setSignInError,l=t.openChat,u=t.setOpenChat,d=w(),h=d.currentUser,m=d.logout,f=Object(a.useState)(!1),x=Object(b.a)(f,2),g=x[0],O=x[1],v=Object(a.useState)(!1),N=Object(b.a)(v,2),k=N[0],L=N[1],P=Object(a.useState)(!0),D=Object(b.a)(P,2),W=D[0],M=D[1];function H(){return(H=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:L(!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=function(){O(!1),L(!1)};Object(a.useEffect)((function(){h&&(M(!1),O(!0))}),[h]);var q=Object(y.jsx)("div",{children:Object(y.jsx)(ne,{})}),V=Object(y.jsx)("div",{children:Object(y.jsx)(ce,{})});return Object(y.jsxs)("div",{className:e.grow,children:[Object(y.jsx)(B.a,{position:"static",className:e.appBar,children:Object(y.jsx)(R.a,{className:e.topbar,children:Object(y.jsxs)(C.a,{children:[Object(y.jsxs)("div",{className:e.leftSide,children:[Object(y.jsx)(C.b,{to:"/",style:{textDecoration:"none"},children:Object(y.jsx)(I.a,{className:e.logo,children:"Birdity"})}),Object(y.jsx)(I.a,{variant:"body2",component:"h1",className:e.slogan,children:"The Birdwatching Social Network"})]}),Object(y.jsxs)("div",{className:e.rightSide,children:[Object(y.jsx)(U.a,{"data-testid":"chatButton",variant:"contained",color:"primary",startIcon:Object(y.jsx)(F.a,{}),className:e.button,disabled:W,onClick:function(){u(!l)},children:Object(y.jsx)(I.a,{children:"Chat"})}),h?Object(y.jsx)(U.a,{"data-testid":"logoutButton",variant:"contained",color:"primary",startIcon:Object(y.jsx)(E.a,{}),onClick:function(){return H.apply(this,arguments)},children:"Log Out"}):Object(y.jsx)(U.a,{"data-testid":"loginButton",variant:"contained",color:"primary",startIcon:Object(y.jsx)(T.a,{}),className:e.button,onClick:function(){i(!0)},children:Object(y.jsx)(I.a,{children:"Sign Up / Log In"})})]})]})})}),Object(y.jsx)(z.a,{open:n,onClose:function(){c(!1)},"aria-labelledby":"modal-title","aria-describedby":"modal-descrition",children:q}),Object(y.jsx)(z.a,{open:r,onClose:function(){i(!1)},"aria-labelledby":"modal-title","aria-describedby":"modal-descrition",children:V}),Object(y.jsx)(A.a,{open:g,autoHideDuration:4e3,onClose:G,children:Object(y.jsx)(ie,{severity:"success",children:"You are logged in!"})}),Object(y.jsx)(A.a,{open:k,autoHideDuration:4e3,onClose:G,children:Object(y.jsx)(ie,{severity:"success",children:"You are logged out!"})}),Object(y.jsx)(A.a,{open:s,autoHideDuration:4e3,onClose:function(){return o(!1)},children:Object(y.jsx)(ie,{severity:"error",children:"Unable to Sign In!"})})]})},oe=n(228),le=n(204),ue=n(211),de=n(208),pe=n(209),je=n(210),be=n(108),he=n.n(be),me=n(107),fe=n.n(me),xe=n(109),ge=n.n(xe),Oe=n(106),ve=n.n(Oe),ye=Object(u.a)((function(e){return{drawer:{width:340,flexShrink:0},text:{color:e.palette.primary.dark},icon:{color:e.palette.primary.dark},userName:{color:e.palette.primary.dark,fontSize:e.spacing(2.5)},userIcon:{color:e.palette.primary.dark,marginRight:e.spacing(2)}}})),we=function(){var e=ye(),t=w().currentUser;return Object(y.jsxs)(oe.a,{variant:"permanent",className:e.drawer,children:[Object(y.jsx)(R.a,{}),Object(y.jsxs)(C.a,{children:[Object(y.jsxs)(le.a,{children:[t&&Object(y.jsx)(C.b,{to:"/profile",style:{textDecoration:"none"},children:Object(y.jsxs)(de.a,{divider:!0,children:[Object(y.jsx)(ve.a,{fontSize:"large",className:e.userIcon}),Object(y.jsx)(I.a,{variant:"h4",className:e.userName,children:t.displayName})]})}),Object(y.jsx)(C.b,{to:"/",style:{textDecoration:"none"},children:Object(y.jsxs)(de.a,{button:!0,children:[Object(y.jsx)(pe.a,{children:Object(y.jsx)(fe.a,{className:e.icon})}),Object(y.jsx)(je.a,{primary:"Home",className:e.text})]},"Home")}),t&&Object(y.jsx)(C.b,{to:"/birds",style:{textDecoration:"none"},children:Object(y.jsxs)(de.a,{button:!0,children:[Object(y.jsx)(pe.a,{children:Object(y.jsx)(he.a,{className:e.icon})}),Object(y.jsx)(je.a,{primary:"My Birds",className:e.text})]},"My Birds")}),t&&Object(y.jsx)(C.b,{to:"/posts",style:{textDecoration:"none"},children:Object(y.jsxs)(de.a,{button:!0,children:[Object(y.jsx)(pe.a,{children:Object(y.jsx)(ge.a,{className:e.icon})}),Object(y.jsx)(je.a,{primary:"My Posts",className:e.text})]},"My Posts")})]}),Object(y.jsx)(ue.a,{}),Object(y.jsx)(C.b,{to:"/about",style:{textDecoration:"none"},children:Object(y.jsx)(de.a,{button:!0,children:Object(y.jsx)(je.a,{primary:"About Us",className:e.text})},"AboutUs")})]})]})},Se=n(220),Ne=n(22),ke=n(110),Ce=n.n(ke),Be=n(80),Re=n.n(Be),Ie=n(200),Ue=n(111),Le=n.n(Ue),Fe=n(112),Pe=n.n(Fe),Te=n(212),De=function(){var e=Object(a.useState)(null),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(0),i=Object(b.a)(r,2),s=i[0],o=i[1],l=Object(a.useState)(null),u=Object(b.a)(l,2),d=u[0],h=u[1];return Object(a.useEffect)((function(){function e(){return(e=Object(j.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=g.ref(n.name),a=x.collection("images"),t.put(n).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;o(t)}),(function(e){console.error(e)}),Object(j.a)(p.a.mark((function e(){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:n=e.sent,c=v(),a.add({url:n,created:c}),h(n);case 6:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n&&function(){e.apply(this,arguments)}()}),[n]),{uploadProgress:s,setUploadProgress:o,imageUrl:d,setFile:c}},Ee=Object(u.a)((function(e){return{container:{display:"flex",justifyContent:"space-between","& > *":{width:"100%",height:e.spacing(20)}},textFieldGrid:{alignItems:"center",marginTop:e.spacing(5)},accountIcon:{marginTop:e.spacing(3),marginLeft:e.spacing(3)},textField:{marginLeft:e.spacing(2),width:"60ch"},uploadButton:{marginLeft:e.spacing(1),marginRight:e.spacing(1),top:e.spacing(1)},checkIcon:{marginLeft:e.spacing(3),marginRight:e.spacing(2.7),top:e.spacing(1)},inputFile:{display:"none"},linearProgress:{width:e.spacing(30),margin:"auto",height:e.spacing(2),borderRadius:e.spacing(1)},logInAlert:{width:e.spacing(27),margin:"auto"}}})),ze=function(){var e=Ee(),t=["image/jpeg","image/png"],n=w().currentUser,c=Object(a.useRef)(),r=De(null),i=r.uploadProgress,s=r.imageUrl,o=r.setFile,l=Object(a.useState)(!0),u=Object(b.a)(l,2),d=u[0],h=u[1],m=Object(a.useState)(),f=Object(b.a)(m,2),g=f[0],N=f[1],k=Object(a.useState)(null),C=Object(b.a)(k,2),B=C[0],R=C[1],I=Object(a.useState)(""),L=Object(b.a)(I,2),F=L[0],P=L[1],T=Object(a.useState)(!1),D=Object(b.a)(T,2),E=D[0],z=D[1],M=Object(a.useState)(!1),G=Object(b.a)(M,2),q=G[0],V=G[1],J=Object(a.useState)(!1),Z=Object(b.a)(J,2),K=Z[0],X=Z[1],Q=Object(a.useState)(!1),$=Object(b.a)(Q,2),ee=$[0],te=$[1],ne=Object(a.useContext)(S).setReRenderPosts;Object(a.useEffect)((function(){100===i&&X(!1),i>0&&i<100&&X(!0)}),[i]),Object(a.useEffect)((function(){function e(){return(e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={text:F,imageUrl:s,createdAt:v(),comments:[],likes:0,userName:n.displayName},e.next=3,x.collection("posts").add(t).then((function(e){x.collection("users").doc(n.uid).update({posts:O.FieldValue.arrayUnion(e)})})).catch((function(e){console.error(n.uid,e)}));case 3:c.current.value="",c.current.focused=!1,P(""),z(!1),N(!1),te(!1),ne(!0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(ee||s)&&function(){e.apply(this,arguments)}()}),[ee,s]),Object(a.useEffect)((function(){n?h(!1):(z(!1),h(!0))}),[n]);var ae=function(){V(!1)};return Object(y.jsxs)("div",{className:e.container,children:[Object(y.jsx)(H.a,{elevation:3,children:Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),P(c.current.value),B?o(B):te(!0)},children:[Object(y.jsxs)(_.a,{container:!0,className:e.textFieldGrid,children:[Object(y.jsx)(_.a,{item:!0,className:e.accountIcon,children:Object(y.jsx)(Ce.a,{color:"primary",fontSize:"large"})}),Object(y.jsx)(_.a,{item:!0,children:Object(y.jsx)(Y.a,{"data-testid":"postTextField",inputRef:c,className:e.textField,label:"Create a Post",placeholder:"Max. 150 chars.",disabled:d,onFocus:function(){return N(!0)},onBlur:""===c.value?N(!1):null,InputLabelProps:{shrink:g},inputProps:{maxLength:150},multiline:!0,rowsMax:4})}),E?Object(y.jsx)(_.a,{item:!0,className:e.checkIcon,children:Object(y.jsx)(Pe.a,{color:"secondary"})}):Object(y.jsxs)(_.a,{item:!0,className:e.uploadButton,children:[Object(y.jsx)("input",{disabled:d,id:"inputFile",accept:"image/*",className:e.inputFile,type:"file",onChange:function(e){var n=e.target.files[0];n&&t.includes(n.type)?(V(!1),z(!0),R(n)):(V(!0),z(!1))}}),Object(y.jsx)("label",{htmlFor:"inputFile",children:Object(y.jsx)(Ie.a,{"data-testid":"addFileButton",color:"primary",disabled:d,component:"span",children:Object(y.jsx)(Le.a,{fontSize:"large"})})})]}),Object(y.jsx)(_.a,{item:!0,children:Object(y.jsx)(U.a,{"data-testid":"sendPostButton",variant:"contained",color:"primary",disabled:d,type:"submit",endIcon:Object(y.jsx)(Re.a,{}),children:"Post"})})]}),(ee||K)&&Object(y.jsx)(Te.a,{className:e.linearProgress}),d&&Object(y.jsx)(W.a,{severity:"info",className:e.logInAlert,children:"Please, log in to post"})]})}),Object(y.jsx)(A.a,{open:q,autoHideDuration:5e3,onClose:ae,children:Object(y.jsx)(W.a,{elevation:4,variant:"filled",severity:"error",onClose:ae,children:"Please, select a .jpg or .png file"})})]})},Ae=n(55),We=n(213),Me=n(214),He=n(91),Ge=n.n(He),qe=n(216),Ve=n(215),_e=n(217),Ye=n(113),Je=n.n(Ye),Ze=n(115),Ke=n.n(Ze),Xe=n(114),Qe=n.n(Xe),$e=n(218),et=n(219),tt=n(116),nt=n.n(tt),at=Object(u.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(2),paddingRight:e.spacing(3),paddingLeft:e.spacing(3)},picture:{maxWidth:e.spacing(80),margin:"auto",borderRadius:e.spacing(.5),marginBottom:e.spacing(2)},text:{marginLeft:e.spacing(6)},actions:{display:"flex",justifyContent:"space-between"},commentField:{display:"flex",justifyContent:"space-around",marginTop:e.spacing(2),marginBottom:e.spacing(2),padding:e.spacing(2)},commentButton:{marginTop:e.spacing(1)},commentCard:{marginBottom:e.spacing(2)}}})),ct=function(e){var t=w().currentUser,n=at(),c=e.docRef.data(),r=Object(a.useState)(c.likes),i=Object(b.a)(r,2),s=i[0],o=i[1],l=Object(a.useState)(c.comments),u=Object(b.a)(l,2),d=u[0],h=u[1],m=c.userName,f=c.createdAt.toDate().toLocaleDateString(),g=c.imageUrl,v=c.text,S=Object(a.useRef)(),N=Object(a.useState)(""),k=Object(b.a)(N,2),C=k[0],B=k[1],R=Object(a.useState)(!1),L=Object(b.a)(R,2),F=L[0],P=L[1],T=Object(a.useState)(!1),D=Object(b.a)(T,2),E=D[0],z=D[1],A=Object(a.useState)(!0),W=Object(b.a)(A,2),M=W[0],q=W[1];Object(a.useEffect)((function(){q(!t)}),[t]),Object(a.useEffect)((function(){function n(){return(n=Object(j.a)(p.a.mark((function n(){var a;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={comment:C,createdAt:(new Date).toLocaleDateString(),userName:t.displayName},n.next=3,x.collection("posts").doc(e.docRef.id).update({comments:[].concat(Object(Ae.a)(d),[a])}).catch((function(e){console.error(e)}));case 3:return S.current.value="",S.current.focused=!1,B(""),n.next=8,x.collection("posts").doc(e.docRef.id).get().then((function(e){h(e.data().comments)})).catch((function(e){console.error(e)}));case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}""!==C&&function(){n.apply(this,arguments)}()}),[C]);var V=function(){var t=Object(j.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(F){t.next=5;break}return t.next=3,x.collection("posts").doc(e.docRef.id).update({likes:O.FieldValue.increment(1)}).then((function(){P(!F)})).catch((function(e){console.error(e)}));case 3:t.next=7;break;case 5:return t.next=7,x.collection("posts").doc(e.docRef.id).update({likes:O.FieldValue.increment(-1)}).then((function(){P(!F)})).catch((function(e){console.error(e)}));case 7:return t.next=9,x.collection("posts").doc(e.docRef.id).get().then((function(e){o(e.data().likes)})).catch((function(e){console.error(e)}));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(y.jsxs)(We.a,{className:n.root,children:[Object(y.jsx)(Me.a,{avatar:Object(y.jsx)(G.a,{children:Object(y.jsx)(Ge.a,{})}),title:m,subheader:f}),Object(y.jsx)(Ve.a,{children:Object(y.jsx)(I.a,{variant:"body1",color:"textPrimary",component:"p",className:n.text,children:v})}),Object(y.jsx)(qe.a,{image:g,className:n.picture,component:"img"}),Object(y.jsxs)(_e.a,{disableSpacing:!0,className:n.actions,children:[Object(y.jsx)(Ie.a,{"aria-label":"likes",disabled:M,onClick:V,children:Object(y.jsx)($e.a,{badgeContent:s,showZero:!0,children:Object(y.jsx)(Je.a,{color:F?"error":"disabled"})})}),Object(y.jsxs)(Ie.a,{"aria-label":"comments",onClick:function(){z(!E)},children:[Object(y.jsx)(I.a,{variant:"body2",color:"textSecondary",component:"p",children:"Comments"}),E?Object(y.jsx)(Qe.a,{}):Object(y.jsx)(Ke.a,{})]})]}),Object(y.jsxs)(et.a,{in:E,timeout:"auto",unmountOnExit:!0,children:[Object(y.jsx)(H.a,{elevation:3,children:Object(y.jsx)("form",{onSubmit:function(e){e.preventDefault(),B(S.current.value)},children:Object(y.jsxs)(_.a,{container:!0,className:n.commentField,children:[Object(y.jsx)(_.a,{item:!0,children:Object(y.jsx)(Y.a,{inputRef:S,label:M?"Please, login to comment":"Write a comment",placeholder:"Max. 150 chars.",disabled:M})}),Object(y.jsx)(_.a,{item:!0,children:Object(y.jsx)(U.a,{variant:"contained",color:"primary",className:n.commentButton,startIcon:Object(y.jsx)(nt.a,{}),type:"submit",disabled:M,children:"Comment"})})]})})}),Object(y.jsx)(ue.a,{}),0!==d.length&&d.map((function(e,t){return Object(y.jsxs)(We.a,{className:n.commentCard,children:[Object(y.jsx)(Me.a,{avatar:Object(y.jsx)(G.a,{children:Object(y.jsx)(Ge.a,{})}),title:e.userName,subheader:e.createdAt}),Object(y.jsx)(Ve.a,{children:Object(y.jsx)(I.a,{paragraph:!0,color:"textSecondary",children:e.comment})}),Object(y.jsx)(ue.a,{})]},t)}))]})]})},rt=function(){var e=w().currentUser,t=Object(a.useState)([]),n=Object(b.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(!1),s=Object(b.a)(i,2),o=s[0],l=s[1];return Object(a.useEffect)((function(){function t(){return(t=Object(j.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.collection("users").doc(e.uid).get().then((function(e){e.data().posts.forEach(function(){var e=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("posts").doc(t.id).get().then((function(e){r((function(t){return[].concat(Object(Ae.a)(t),[e])}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(e){console.error(e)}));case 2:l(!0);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(y.jsx)("div",{children:o?c.map((function(e,t){return Object(y.jsx)(ct,{docRef:e},t)})):Object(y.jsx)(Se.a,{style:{margin:"35%",marginTop:"25%"}})})},it=n(221),st=n(222),ot=Object(u.a)((function(e){return{gridList:{width:800,height:800},progress:{marginLeft:e.spacing(40),marginTop:e.spacing(10)}}})),lt=function(){var e=ot(),t=w().currentUser,n=Object(a.useState)([]),c=Object(b.a)(n,2),r=c[0],i=c[1],s=Object(a.useState)(!1),o=Object(b.a)(s,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){function e(){return(e=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("users").doc(t.uid).get().then((function(e){e.data().posts.forEach(function(){var e=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("posts").doc(t.id).get().then((function(e){i((function(t){return[].concat(Object(Ae.a)(t),[e.data().imageUrl])}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(e){console.error(e)}));case 2:u(!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(y.jsx)("div",{children:l?Object(y.jsx)(it.a,{className:e.gridList,cols:3,cellHeight:184,children:r.map((function(e,t){return Object(y.jsx)(st.a,{children:Object(y.jsx)("img",{src:e,alt:"Bird"})},t)}))}):Object(y.jsx)(Se.a,{className:e.progress})})},ut=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"space-around"},title:{margin:"auto",marginTop:e.spacing(3),marginBottom:e.spacing(3)},data:{display:"flex"},field:{fontSize:e.spacing(2.5),marginLeft:e.spacing(30)},text:{fontSize:e.spacing(2.5),marginLeft:"auto",marginRight:e.spacing(30)}}})),dt=function(){var e=ut(),t=w().currentUser,n=new Date(t.metadata.creationTime).toLocaleDateString();return Object(y.jsxs)(We.a,{className:e.root,children:[Object(y.jsx)(I.a,{className:e.title,component:"h2",variant:"h5",color:"textSecondary",gutterBottom:!0,children:"User Profile"}),Object(y.jsxs)(Ve.a,{className:e.data,children:[Object(y.jsx)(I.a,{className:e.field,color:"textSecondary",component:"p",children:"Name:"}),Object(y.jsx)(I.a,{className:e.text,component:"p",children:t.displayName})]}),Object(y.jsx)(ue.a,{variant:"middle"}),Object(y.jsxs)(Ve.a,{className:e.data,children:[Object(y.jsx)(I.a,{className:e.field,color:"textSecondary",component:"p",children:"Email:"}),Object(y.jsx)(I.a,{className:e.text,component:"p",children:t.email})]}),Object(y.jsx)(ue.a,{variant:"middle"}),Object(y.jsxs)(Ve.a,{className:e.data,children:[Object(y.jsx)(I.a,{className:e.field,color:"textSecondary",component:"p",children:"Birdity User since:"}),Object(y.jsx)(I.a,{className:e.text,component:"p",children:n})]})]})},pt=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"space-around"},title:{margin:"auto",marginTop:e.spacing(3),marginBottom:e.spacing(3)},text:{marginLeft:e.spacing(5),marginRight:e.spacing(5)}}})),jt=function(){var e=pt();return Object(y.jsxs)(We.a,{className:e.root,children:[Object(y.jsx)(I.a,{className:e.title,component:"h2",variant:"h5",color:"textSecondary",gutterBottom:!0,children:"About Us"}),Object(y.jsx)(I.a,{className:e.text,variant:"body1",align:"justify",paragraph:!0,children:"This is just a fake social network for bird lovers like a web app exercise at The Odin Project. It is made using React, React Router, Material-UI, and Firebase. It also has a simple chat implemented."}),Object(y.jsxs)(I.a,{className:e.text,variant:"body1",align:"justify",paragraph:!0,children:["If you are interested in learning web development, I highly recommend ",Object(y.jsx)("a",{href:"https://theodinproject.com",target:"_blank",rel:"noreferrer",children:"The Odin Project"}),". You can see my slow but steady progress in the web development journey on my ",Object(y.jsx)("a",{href:"https://github.com/joan-kii?tab=repositories",target:"_blank",rel:"noreferrer",children:"Github"}),"."]})]})},bt=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"space-between",marginTop:e.spacing(9),marginLeft:e.spacing(40),padding:e.spacing(1),width:e.spacing(110)},progress:{margin:"auto",marginTop:e.spacing(10)}}})),ht=function(){var e=bt(),t=Object(a.useState)(!1),n=Object(b.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(),s=Object(b.a)(i,2),o=s[0],l=s[1],u=Object(a.useContext)(S),d=u.reRenderPosts,h=u.setReRenderPosts;return Object(a.useEffect)((function(){var e=[];function t(){return(t=Object(j.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.collection("posts").get().then((function(t){t.forEach((function(t){e.push(t)}))})).catch((function(e){console.error(e)}));case 2:l(e.map((function(e,t){return Object(y.jsx)(ct,{docRef:e},t)}))),h(!1),r(!0);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[d]),Object(y.jsx)("div",{className:e.root,children:Object(y.jsx)(C.a,{children:Object(y.jsxs)(Ne.c,{children:[Object(y.jsxs)(Ne.a,{exact:!0,path:"/",children:[Object(y.jsx)(ze,{}),c?o:Object(y.jsx)(Se.a,{className:e.progress})]}),Object(y.jsx)(Ne.a,{exact:!0,path:"/posts",children:Object(y.jsx)(rt,{})}),Object(y.jsx)(Ne.a,{exact:!0,path:"/birds",children:Object(y.jsx)(lt,{})}),Object(y.jsx)(Ne.a,{exact:!0,path:"/profile",children:Object(y.jsx)(dt,{})}),Object(y.jsx)(Ne.a,{exact:!0,path:"/about",children:Object(y.jsx)(jt,{})})]})})})},mt=function(e){var t=Object(a.useState)([]),n=Object(b.a)(t,2),c=n[0],r=n[1];return Object(a.useEffect)((function(){var t=x.collection(e).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(k.a)(Object(k.a)({},e.data()),{},{id:e.id}))})),r(t)}));return function(){return t()}}),[e]),{docs:c}},ft=Object(u.a)((function(e){return{card:{display:"flex",position:"fixed",flexDirection:"column",justifyContent:"center",maxWidth:e.spacing(70),maxHeight:e.spacing(50),marginTop:e.spacing(10),marginLeft:e.spacing(155),padding:e.spacing(2)},text:{color:e.palette.primary.light},cardTitle:{margin:"auto"},loadingCircle:{margin:"auto",marginBottom:e.spacing(2),color:e.palette.primary.light},picture:{maxWidth:e.spacing(45),margin:"auto",borderRadius:e.spacing(.5),marginBottom:e.spacing(2)}}})),xt=function(){var e=ft(),t=mt("images").docs,n=Object(a.useState)(!0),c=Object(b.a)(n,2),r=c[0],i=c[1],s=Object(a.useRef)();return Object(a.useEffect)((function(){0!==t.length&&(s.current=t[Math.floor(Math.random()*t.length)].url,i(!1))}),[t]),Object(y.jsxs)(We.a,{className:e.card,children:[Object(y.jsx)(Ve.a,{className:e.cardTitle,children:Object(y.jsx)(I.a,{variant:"h6",component:"h3",className:e.text,children:"Picture Of The Day"})}),r?Object(y.jsx)(Se.a,{className:e.loadingCircle,size:"3rem",thickness:4}):Object(y.jsx)(qe.a,{className:e.picture,image:s.current,component:"img"})]})},gt=n(62),Ot=n(230),vt=n(117),yt=n.n(vt),wt=n(118),St=n.n(wt),Nt=n(15),kt=Object(u.a)((function(e){return{root:{position:"fixed",bottom:e.spacing(2),left:e.spacing(2),width:e.spacing(37),height:e.spacing(60),zIndex:e.zIndex.drawer+1,borderRadius:e.spacing(1)},topBar:{position:"relative",height:"10%",borderTopRightRadius:e.spacing(1),borderTopLeftRadius:e.spacing(1),background:e.palette.primary.dark},toolBar:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingLeft:e.spacing(1)},title:{marginBottom:e.spacing(2)},chatField:{height:"80%",overflowY:"scroll",display:"flex",flexDirection:"column",padding:e.spacing(.5)},messageUser:{width:e.spacing(15),margin:e.spacing(0,.1),lineHeight:e.spacing(.2),padding:e.spacing(.3,0)},messageText:{maxWidth:e.spacing(32),margin:e.spacing(0,.3),lineHeight:e.spacing(.2),padding:e.spacing(.5),background:"#f8f5f1",borderRadius:e.shape.borderRadius},sended:{display:"flex",flexDirection:"column",alignItems:"flex-end",marginBottom:e.spacing(.5),"& cite":{background:"#8fd6e1",borderRadius:e.shape.borderRadius}},received:{display:"flex",flexDirection:"column",marginBottom:e.spacing(.5),"& cite":{background:"#9fe6a0",borderRadius:e.shape.borderRadius}},inputField:Object(gt.a)({position:"relative",marginBottom:e.spacing(2),borderRadius:e.shape.borderRadius,backgroundColor:Object(Nt.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Nt.c)(e.palette.common.white,.25)},width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),inputIcon:{paddingTop:e.spacing(0,2),marginLeft:e.spacing(1),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},input:Object(gt.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(3),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"14ch","&:focus":{width:"18ch"}}),actionButton:{position:"relative",marginRight:e.spacing(-2),marginBottom:e.spacing(2),marginLeft:e.spacing(2),background:e.palette.common.white,"&:hover":{background:e.palette.common.white}},bottomBar:{position:"relative",display:"flex",flexDirection:"row",justifyContent:"flex-end",top:"auto",bottom:0,height:"10%",borderBottomRightRadius:e.spacing(1),borderBottomLeftRadius:e.spacing(1),background:e.palette.primary.dark}}})),Ct=function(e){var t=kt(),n=w().currentUser,a=e.message,c=a.text,r=a.uid,i=a.userName,s=r===n.uid?t.sended:t.received;return Object(y.jsxs)("div",{className:s,children:[Object(y.jsxs)("cite",{className:t.messageUser,children:[i," says:"]}),Object(y.jsx)("p",{className:t.messageText,children:c})]})},Bt=function(){var e=w().currentUser,t=kt(),n=Object(a.useContext)(S),c=n.openChat,r=n.setOpenChat,i=Object(a.useState)(),s=Object(b.a)(i,2),o=s[0],l=s[1],u=Object(a.useState)(!0),d=Object(b.a)(u,2),h=d[0],m=d[1],f=Object(a.useRef)(),g=Object(a.useRef)(),O=Object(a.useRef)();Object(a.useEffect)((function(){function e(){return(e=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("messages").orderBy("createdAt").limitToLast(25).get().then((function(e){g.current=e.docs}));case 2:l(g.current.map((function(e,t){var n=e.data();return Object(y.jsx)(Ct,{message:n},t)}))),m(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}h&&function(){e.apply(this,arguments)}()}),[h]),Object(a.useEffect)((function(){c&&O.current.scrollIntoView({behavior:"smooth"})}),[g]);var N=function(){var t=Object(j.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={text:f.current.value,uid:e.uid,userName:e.displayName,createdAt:v()},t.next=3,x.collection("messages").add(n).catch((function(e){console.error(e)}));case 3:f.current.value="",f.current.focused=!1,m(!0);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:c&&Object(y.jsxs)(H.a,{className:t.root,children:[Object(y.jsx)(B.a,{className:t.topBar,children:Object(y.jsxs)(R.a,{className:t.toolBar,children:[Object(y.jsx)(I.a,{className:t.title,variant:"h6",component:"h3",children:"Birdity SuperChat"}),Object(y.jsx)(Ie.a,{"data-testid":"closeButton",size:"small",className:t.actionButton,onClick:function(){r(!1)},children:Object(y.jsx)(yt.a,{})})]})}),Object(y.jsxs)("div",{className:t.chatField,children:[o,Object(y.jsx)("span",{ref:O})]}),Object(y.jsx)(B.a,{className:t.bottomBar,children:Object(y.jsxs)(R.a,{className:t.toolBar,children:[Object(y.jsxs)("div",{className:t.inputField,children:[Object(y.jsx)("div",{className:t.inputIcon,children:Object(y.jsx)(St.a,{})}),Object(y.jsx)(Ot.a,{"data-testid":"textField",placeholder:"Enter Message...",classes:{root:t.inputRoot,input:t.input},inputProps:{"aria-label":"message"},inputRef:f})]}),Object(y.jsx)(Ie.a,{"data-testid":"sendButton",size:"small",className:t.actionButton,onClick:N,children:Object(y.jsx)(Re.a,{})})]})})]})})},Rt=Object(u.a)({root:{display:"flex",justifyContent:"space-between",flexWrap:"nowrap",alignItems:"flex-start"}}),It=function(){var e=Rt();return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(N,{children:[Object(y.jsx)(se,{}),Object(y.jsx)(we,{}),Object(y.jsxs)("div",{className:e.root,children:[Object(y.jsx)(ht,{}),Object(y.jsx)(xt,{})]}),Object(y.jsx)(Bt,{})]})})},Ut=Object(o.a)({palette:{primary:{main:"#423bca"},secondary:{main:"#008000"}},typography:{fontFamily:"Merriweather"}});i.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsxs)(l.a,{theme:Ut,children:[Object(y.jsx)(s.a,{}),Object(y.jsx)(It,{})]})}),document.getElementById("root"))}},[[154,1,2]]]);
//# sourceMappingURL=main.c238c7db.chunk.js.map